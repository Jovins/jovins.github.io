(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{323:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),n("p",[t._v("小程序在适配 iPhone X 屏幕时遇到的一些问题以及总结，希望对你的小程序开发能有所帮助。")]),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("在去年 2017 年份 iPhone X 正式发布后，引发了一波 iOS App 适配 iPhone X 的热潮和技术文章。")]),t._v(" "),n("p",[t._v("我们这里先简单总结一下 iPhone X 屏幕的基础数据，方便后续在小程序开发中进行适配。")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),n("p",[t._v("根据苹果官方的文档，iPhone X 顶部状态栏的适配安全区域的高度为 44pt，底部操作条区域的高度为 34pt。另外，在 iPhone X 中，一些系统 Bar 的默认高度相比于之前的设备也发生了变化，如下表所示。")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),n("p",[t._v("根据微信开发文档，在 4.7 英寸的 iPhone 设备上（iPhone 6/7/8），屏幕宽度为 375px（此处应该理解为 375 point），共有 750 个物理像素，则 750rpx = 375px = 750 物理像素，1rpx = 0.5px = 1物理像素。")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),n("p",[t._v("上面我们简要介绍了 iPhone X 的屏幕数据和小程序中的尺寸单位作为铺垫，现在终于要切入正题了，要在小程序中适配 iPhone X 屏幕，首先我们需要知道如何判断设备类型。")]),t._v(" "),t._m(10),t._v(" "),t._m(11),n("p",[t._v("上述每个字段的含义详见微信文档.")]),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._v(" "),n("p",[t._v("在小程序页面开发中，涉及到需要适配 iPhone X 的地方主要有：导航栏（NavigationBar），标签栏（TabBar）以及页面底部的吸底按钮。")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),n("p",[t._v("以自定义导航栏适配为例，步骤如下：")]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._m(25),t._v(" "),t._m(26),n("p",[t._v("此外，对于自定义导航栏和标签栏，我建议还是要遵循 iPhone UI 的设计规范，样式我们可以参考苹果官方的渲染图。")]),t._v(" "),t._m(27),t._v(" "),n("p",[t._v("在小程序页面中，吸底按钮是很常见的一种设计，我们一般会把一些重要的按钮放在页面底部悬浮不动。")]),t._v(" "),t._m(28),t._v(" "),t._m(29),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),n("p",[t._v("本文简要介绍了在小程序开发中如何适配 iPhone X 屏幕.")]),t._v(" "),t._m(33),t._v(" "),n("p",[n("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/wx.getSystemInfo.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信开发文档"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/systeminfo.html#wxgetsysteminfoobject",target:"_blank",rel:"noopener noreferrer"}},[t._v("iPhone X 适配实践"),n("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"小程序适配-iphone-x-总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序适配-iphone-x-总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 小程序适配 iPhone X 总结")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"iphone-x-屏幕数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iphone-x-屏幕数据","aria-hidden":"true"}},[this._v("#")]),this._v(" iPhone X 屏幕数据")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("屏幕尺寸：5.8 英寸（对角线）")]),this._v(" "),s("li",[this._v("屏幕物理分辨率：1125px × 2436px，458 ppi")]),this._v(" "),s("li",[this._v("实际开发适配尺寸：375pt × 812pt，@3x")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("此外，由于在 iPhone X 屏幕顶部状态栏区域有“齐刘海”，以及在屏幕底部增加了“操作条”，如下图所示，因此，我们在开发中需要注意"),s("strong",[this._v("安全区域")]),this._v("的问题。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("Item")]),t._v(" "),n("th",[t._v("Normal Height")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("iPhoneX Height")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("UINavigationBar")]),t._v(" "),n("td",[t._v("44 pt")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("44 pt(96 pt large title)")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("UIStatusBar")]),t._v(" "),n("td",[t._v("20 pt")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("44 pt")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("UINavigationBar + UIStatusBar")]),t._v(" "),n("td",[t._v("64 pt")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("88 pt")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("UITabBar")]),t._v(" "),n("td",[t._v("49 pt")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("83 pt")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("UIToolBar")]),t._v(" "),n("td",[t._v("44 pt")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("83 pt")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("所以在 iOS App 开发中，如果我们使用系统默认的 "),s("code",[this._v("UINavigationController")]),this._v(" 和 "),s("code",[this._v("UITabBarController")]),this._v(" 时，则无需额外的适配工作，iOS 系统会自动适配好相关 Bar 的安全区域问题。如果我们使用了自定义的导航栏和标签栏，则需要注意根据设备类型区分设置这些 Bar 的不同高度。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"小程序的尺寸单位"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序的尺寸单位","aria-hidden":"true"}},[this._v("#")]),this._v(" 小程序的尺寸单位")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了解决不同屏幕尺寸的适配问题，小程序自己定了一个尺寸单位：rpx（responsive pixel），它可以根据屏幕宽度进行自适应。小程序中规定，"),s("strong",[this._v("所有设备的屏幕宽度都为 750rpx")]),this._v("，根据设备屏幕实际宽度的不同，1rpx 所代表的实际像素值也不一样。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("table",[n("thead",[n("tr",[n("th",[t._v("设备")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("Rpx换算px(屏幕宽度/750)")]),t._v(" "),n("th",{staticStyle:{"text-align":"right"}},[t._v("px换算rpx (750/屏幕宽度)")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("iPhone 5")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("1rpx = 0.42px")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v("1px = 2.34px")])]),t._v(" "),n("tr",[n("td",[t._v("iPhone 6")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("1rpx = 0.5px")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v("1px = 2rpx")])]),t._v(" "),n("tr",[n("td",[t._v("iPhone 6 Plus")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("1rpx = 0.552px")]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[t._v("1px = 1.81px")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"小程序中如何判断设备为-iphone-x"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序中如何判断设备为-iphone-x","aria-hidden":"true"}},[this._v("#")]),this._v(" 小程序中如何判断设备为 iPhone X")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("微信的小程序 API 中提供了一个 "),s("code",[this._v("wx.getSystemInfo(OBJECT)")]),this._v(" 方法用于获取用户手机的系统信息和设备信息，包含如下数据：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("Object "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"errMsg"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"getSystemInfo"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tSDKVersion"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.20"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \tbatteryLevel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    errMsg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"getSystemInfo:ok"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    fontSizeSetting"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    language"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zh_CN"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iPhone X(GSM+CDMA)<iPhone10,3>"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pixelRatio"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    platform"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iOS"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    screenHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("812")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    screenWidth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("375")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    statusBarHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("44")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    system"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iOS 11.4.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    version"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6.7.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    windowHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("642")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    windowWidth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("375")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("__proto__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("因此，我们可以根据该方法返回的手机型号字段 "),n("code",[t._v("model")]),t._v(" 是否包含 "),n("code",[t._v("iPhone X")]),t._v(" 字符串来判断设备是否为 iPhone X，也可以根据 "),n("code",[t._v("screenHeight")]),t._v(" 的高度是否等于 "),n("code",[t._v("812")]),t._v(" 来判断。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("strong",[t._v("NOTE:")]),t._v(" 这里有一个小坑需要注意，在微信开发者工具中的模拟器，如果选择为 iPhone X，此时获取到的 "),n("code",[t._v("model")]),t._v(" 值为 "),n("code",[t._v("iPhone X")]),t._v("，导致我以为真机也是这个值，于是直接用 "),n("code",[t._v("if (model == 'iPhone X')")]),t._v(" 来判断，但其实真机下 "),n("code",[t._v("model")]),t._v(" 的值为这种格式： "),n("code",[t._v("iPhone X (GSM+CDMA)<iPhone10,3>")]),t._v("，因此我们需要用字符串检索匹配进行判断。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("综上，我们可以在 "),n("code",[t._v("app.js")]),t._v("  的 "),n("code",[t._v("globalData")]),t._v(" 中添加一个字段 "),n("code",[t._v("isIPX")]),t._v(" 用于标识当前设备是否为 iPhone X，然后在小程序启动时 "),n("code",[t._v("onLaunch")]),t._v(" 中调用 "),n("code",[t._v("wx.getSystemInfo(OBJECT)")]),t._v(" 方法并在其 "),n("code",[t._v("success")]),t._v(" 回调中读取 "),n("code",[t._v("model")]),t._v(" 字段进行分析，代码大致如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局数据")]),t._v("\n  globalData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其他数据定义 ...")]),t._v("\n\n    isIPX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前设备是否为 iPhone X")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小程序启动入口")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onLaunch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其他启动代码...")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断设备是否为 iPhone X")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkIsIPhoneX")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("checkIsIPhoneX")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" self "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n    wx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSystemInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据 model 进行判断")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("search")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'iPhone X'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isIPX "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者根据 screenHeight 进行判断")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if (res.screenHeight == 812) {")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   self.globalData.isIPX = true")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果需要小程序启动时立即获取设备相关信息，也可以调 "),s("code",[this._v("wx.getSystemInfoSync()")]),this._v(" 方法，它会同步获取数据并立即返回。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"页面适配实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#页面适配实战","aria-hidden":"true"}},[this._v("#")]),this._v(" 页面适配实战")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("导航栏和标签栏适配")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("如果我们使用微信小程序官方组件进行开发，没有进行自定义，在 "),n("code",[t._v("app.json")]),t._v(" 文件中设置 "),n("code",[t._v("tabBar")]),t._v(" 页面，且 "),n("code",[t._v("window")]),t._v(" 的 "),n("code",[t._v("navigationStyle")]),t._v(" 值为 "),n("code",[t._v("default")]),t._v("，那么我们无需在 iPhone X 中对导航栏和标签栏进行适配，微信会自动帮我们适配好.")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("但是我们如果是自定义导航栏（在 "),n("code",[t._v("app.json")]),t._v(" 文件中设置 "),n("code",[t._v("window")]),t._v(" 的 "),n("code",[t._v("navigationStyle")]),t._v(" 为 "),n("code",[t._v("custom")]),t._v("，此时只保留右上角胶囊状的按钮，需要开发者自己画导航栏样式）和标签栏，则我们需要在每个页面中判断设备类型，并针对 iPhone X 屏幕在安全区域内进行布局，并修改相关 Bar 的高度值（见上述表格）。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("（1）在每个页面的 "),s("code",[this._v("page.js")]),this._v(" 中先读取 "),s("code",[this._v("app.js")]),this._v(" 中的 "),s("code",[this._v("isIPX")]),this._v(" 值，如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面其他数据...")]),t._v("\n    isIPX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isIPX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其他代码")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("（2）然后在 "),s("code",[this._v("page.wxss")]),this._v(" 样式文件中对某一个视图 "),s("code",[this._v("View")]),this._v(" 分别为普通屏幕和 iPhone X 屏幕写两种样式，如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bar"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("view "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  height"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v("px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 其他样式值 */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bar"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("view"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IPX")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  height"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v("px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 其他样式值 */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("（3）最后在 "),n("code",[t._v("page.wxml")]),t._v(" 页面结构布局中根据 "),n("code",[t._v("isIPX")]),t._v(" 的值给 "),n("code",[t._v("View")]),t._v(" 设置不同的 "),n("code",[t._v("class")]),t._v(" 样式，如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-css extra-class"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[t._v("<view class="),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isIPX ? "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'navi-bar-view-IPX'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'navi-bar-view'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('">\n</view>\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("吸底按钮适配")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 iPhone X 中我们需要把吸底按钮往上偏移 34 像素，可通过在 CSS 样式中设置 "),s("code",[this._v("padding-bottom")]),this._v(" 为 "),s("code",[this._v("34px")]),this._v(" 实现，参考代码如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-css extra-class"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".feed-bottom-view")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 48px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 吸底按钮的高度 */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("bottom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0.95"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fixed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-top-style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" solid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-top-width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0.5px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 分割线的高度 */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lightgrey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #F8F8F8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".feed-bottom-view-IPX")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* iPhone X 内容往上偏移 34px */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-bottom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 34px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-css extra-class"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[t._v("<view class="),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("isIPX ? "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feed-bottom-view feed-bottom-view-IPX'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feed-bottom-view'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('">\n\x3c!-- 底部吸底按区域 --\x3e\n</view>\n')])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("**备注：**如前面所述，对于不同设备宽度，1rpx 所代表的实际像素值也不一样，而在不同尺寸的 iPhone 设备（3.5/4.0/4.7/5.5 英寸）中，虽然它们的宽度不同，但其导航栏+状态栏的高度都为 64pt（iPhone X 为 88pt），标签栏 TabBar 的高度都为 49pt（iPhone X 为 83pt）。所以在小程序开发中，当我们需要自定义导航栏、标签栏，或者适配 iPhone X 顶部和底部安全区域时，我建议此处的单位直接使用 "),n("code",[t._v("px")]),t._v("（在小程序中对应 iOS 开发中的点 "),n("code",[t._v("pt")]),t._v("）而不使用 "),n("code",[t._v("rpx")]),t._v("（当然页面的其他元素的尺寸描述还是推荐使用 "),n("code",[t._v("rpx")]),t._v("），以确保最终渲染显示的高度与 iOS 系统默认的一致。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"相关链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关链接","aria-hidden":"true"}},[this._v("#")]),this._v(" 相关链接")])}],!1,null,null,null);s.default=e.exports}}]);