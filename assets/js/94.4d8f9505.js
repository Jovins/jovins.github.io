(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{288:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),s("p",[t._v("关于 App 瘦身更多的信息，可以查看 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fhelp.apple.com%2Fxcode%2Fmac%2Fcurrent%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("Xcode Help"),s("OutboundLink")],1),t._v(" 中的 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fhelp.apple.com%2Fxcode%2Fmac%2Fcurrent%2F%23%2Fdevbbdc5ce4f",target:"_blank",rel:"noopener noreferrer"}},[t._v("What is app thinning?"),s("OutboundLink")],1),t._v("有关应用程序文件大小的信息，请参考 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fhelp.apple.com%2Fapp-store-connect%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("App Store Connect Help"),s("OutboundLink")],1),t._v(" 中的 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fhelp.apple.com%2Fapp-store-connect%2F%23%2Fdev3b56ce97c",target:"_blank",rel:"noopener noreferrer"}},[t._v("View builds and file sizes"),s("OutboundLink")],1)]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("@dynamicCallable")]),t._v(" 允许您使用一个简单的语法糖像调用函数一样来调用命名类型。主要的应用场景是动态语言互操作。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0216-dynamic-callable.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0216"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("p",[t._v("例如：")])])]),t._v(" "),t._m(8),s("ul",[s("li",[t._v("Key path 现在支持特性(identity) keypath ("),s("code",[t._v("\\.self")]),t._v(")，这是一个引用自身完整输入值的 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fwritablekeypath%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("WritableKeyPath"),s("OutboundLink")],1),t._v("。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0227-identity-keypath.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0227"),s("OutboundLink")],1),t._v(")")])]),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),s("p",[t._v("之前不是特意要支持这个特性，而且现在这样写会报错了。")]),t._v(" "),t._m(12),t._v(" "),t._m(13),s("ul",[s("li",[s("p",[t._v("在 Swift 5 中，带有一个可选类型的表达式的 "),s("code",[t._v("try?")]),t._v(" 将会展平生成的可选项，而不是返回嵌套的可选项。（"),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0230-flatten-optional-try.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0230"),s("OutboundLink")],1),t._v(")")])]),t._v(" "),s("li",[s("p",[t._v("如果类型"),s("code",[t._v("T")]),t._v(" 符合"),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fswift_standard_library%2Finitialization_with_literals%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("Initialized with Literals"),s("OutboundLink")],1),t._v("中的其中一个协议（如 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fexpressiblebyintegerliteral%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("ExpressibleByIntegerLiteral"),s("OutboundLink")],1),t._v("），且 "),s("code",[t._v("literal")]),t._v(" 是一个字面量表达示时，则 "),s("code",[t._v("T(literal)")]),t._v(" 会使用相应的协议创建一个类型 "),s("code",[t._v("T")]),t._v(" 的字面量，而不是使用一个协议的默认字面量类型的值来调用 "),s("code",[t._v("T")]),t._v(" 的 "),s("code",[t._v("initializer")]),t._v("。")]),t._v(" "),s("p",[t._v("如，类似于 "),s("code",[t._v("UInt64(0xffff_ffff_ffff_ffff)")]),t._v(" 这样的表达式现在是有效的，则之前会由于整型字面量的默认类型是 "),s("code",[t._v("Int")]),t._v("，而导致溢出。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0213-literal-init-via-coercion.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0213"),s("OutboundLink")],1),t._v(")")])]),t._v(" "),s("li",[s("p",[t._v("提高了"),s("code",[t._v("字符串插值")]),t._v("操作的性能、清晰性和效率。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0228-fix-expressiblebystringinterpolation.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0228"),s("OutboundLink")],1),t._v(")")]),t._v(" "),t._m(14)])]),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fdictionaryliteral%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("DictionaryLiteral"),s("OutboundLink")],1),t._v(" 类型重命名为 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fkeyvaluepairs%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("KeyValuePairs"),s("OutboundLink")],1),t._v("。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0214-DictionaryLiteral.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0214"),s("OutboundLink")],1),t._v(")")])]),t._v(" "),s("li",[s("p",[t._v("桥接到 "),s("code",[t._v("Objective-C")]),t._v(" 代码的 "),s("code",[t._v("Swift")]),t._v(" 字符串现在可以在适当的时候从 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fcorefoundation%2F1542133-cfstringgetcstringptr%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("CFStringGetCStringPtr"),s("OutboundLink")],1),t._v("返回一个 "),s("code",[t._v("non-nil")]),t._v(" 值，同时从 "),s("code",[t._v("-UTF8String")]),t._v(" 返回的指针与字符串的生命周期相关联，而不是最相近的那个 "),s("code",[t._v("autorelease pool")]),t._v("。如果程序正确，那应该没有任何问题，并且会发现性能显著提高。但是，这也可能会让之前一些未经测试的代码运行，从而暴露一些潜在的问题；例如，如果有一个对 "),s("code",[t._v("non-nil")]),t._v(" 值的判断，而相应分支在 Swift 5 之前却从未被执行过。(26236614)")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fsequence%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sequence"),s("OutboundLink")],1),t._v(" 协议不再具有 "),s("code",[t._v("SubSequence")]),t._v(" 关联类型。先前返回 "),s("code",[t._v("SubSequence")]),t._v(" 的 "),s("code",[t._v("Sequence")]),t._v(" 方法现在会返回具体类型。例如，"),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fsequence%2F3128822-suffix%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("suffix(_😃"),s("OutboundLink")],1),t._v("现在会返回一个 "),s("code",[t._v("Array")]),t._v("。(47323459)")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("SubSequence")]),t._v(" 的 "),s("code",[t._v("Sequence")]),t._v(" 扩展应该修改为类似地使用具体类型，或者修改为 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fcollection%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("Collection"),s("OutboundLink")],1),t._v(" 的扩展，在 "),s("code",[t._v("Collection")]),t._v(" 中 "),s("code",[t._v("SubSequence")]),t._v(" 仍然可用。(45761817)")])])]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),t._m(18),s("p",[t._v("需要改为：")]),t._v(" "),t._m(19),s("p",[t._v("或者是：")]),t._v(" "),t._m(20),s("ul",[s("li",[s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fstring%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("String"),s("OutboundLink")],1),t._v("结构的原生编码将从 "),s("code",[t._v("UTF-16")]),t._v(" 切换到 "),s("code",[t._v("UTF-8")]),t._v("，与 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fstring%2Futf16view%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("String.UTF16View"),s("OutboundLink")],1),t._v(" 相比，这会提高相关联的 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fswift%2Fstring%2Futf8view%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("String.UTF8View"),s("OutboundLink")],1),t._v(" 的性能。重新对所有代码进行评审以提高性能，尤其是使用了 "),s("code",[t._v("String.UTF16View")]),t._v(" 的代码。")])]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),s("ul",[s("li",[s("p",[t._v("现在，在使用 Swift 5 软件包管理器时，"),s("code",[t._v("Targets")]),t._v(" 可以声明一些常用的针对特定目标的 "),s("code",[t._v("build settings")]),t._v(" 设置。新设置也可以基于平台和构建配置进行条件化处理。包含的构建设置支持 "),s("code",[t._v("Swift")]),t._v(" 和 "),s("code",[t._v("C")]),t._v(" 语言定义，"),s("code",[t._v("C")]),t._v(" 语言头文件搜索路径，链接库和链接框架。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0238-package-manager-build-settings.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0238"),s("OutboundLink")],1),t._v(")(23270646)")])]),t._v(" "),s("li",[s("p",[t._v("在使用 Swift 5 软件包管理器时，"),s("code",[t._v("package")]),t._v(" 现在可以自定义 Apple 平台的最低 "),s("code",[t._v("deployment target")]),t._v("。而如果 "),s("code",[t._v("package A")]),t._v(" 依赖于 "),s("code",[t._v("package B")]),t._v("，但 "),s("code",[t._v("package B")]),t._v(" 指定的最小 "),s("code",[t._v("deployment target")]),t._v(" 高于 package A 的最小 "),s("code",[t._v("deployment target")]),t._v("，则构建 package A 时会抛出错误。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0236-package-manager-platform-deployment-settings.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0236"),s("OutboundLink")],1),t._v(")(28253354)")])]),t._v(" "),s("li",[s("p",[t._v("新的依赖镜像功能允许顶层包覆盖依赖 URL。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0219-package-manager-dependency-mirroring.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0219"),s("OutboundLink")],1),t._v(")(42511642)")]),t._v(" "),s("p",[t._v("使用以下命令设置镜像：")])])]),t._v(" "),t._m(23),s("ul",[t._m(24),t._v(" "),t._m(25),t._v(" "),s("li",[t._v("对体积较大的包进行包管理器操作现在明显更快了。")]),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),s("li",[t._v("有关使用 Swift 包管理器的更多信息，请访问 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fswift.org%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("swift.org"),s("OutboundLink")],1),t._v(" 上的 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fswift.org%2Fgetting-started%2F%23using-the-package-manager",target:"_blank",rel:"noopener noreferrer"}},[t._v("Using the Package Manager"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),s("ul",[s("li",[s("p",[t._v("现在，在优化（"),s("code",[t._v("-O")]),t._v(" 和 "),s("code",[t._v("-Osize")]),t._v("）构建中，默认情况下在运行时强制执行独占内存访问。违反排他性的程序将在运行时抛出带有“重叠访问”诊断消息错误。您可以使用命令行标志禁用此命令："),s("code",[t._v("-enforce-exclusivity = unchecked")]),t._v("，但这样做可能会导致未定义的行为。运行时违反排他性通常是由于同时访问类属性，全局变量（包括顶层代码中的变量）或通过 "),s("code",[t._v("eacaping")]),t._v(" 闭包捕获的变量。（"),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-7139",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-7139"),s("OutboundLink")],1),t._v("）")])]),t._v(" "),t._m(30),t._v(" "),s("li",[t._m(31),t._v(" "),t._m(32),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("Swift 4")]),t._v(" 和 "),s("code",[t._v("4.2")]),t._v(" 模式下，您仍然可以使用 "),s("code",[t._v("@unknown default")]),t._v("。如果省略 "),s("code",[t._v("@unknown default")]),t._v("，而又传递了一个未知的值，则程序在运行时抛出异常，这与 "),s("code",[t._v("Xcode 10.1")]),t._v(" 中的 "),s("code",[t._v("Swift 4.2")]),t._v(" 上的行为是一致的。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmaster%2Fproposals%2F0192-non-exhaustive-enums.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("SE-0192"),s("OutboundLink")],1),t._v(")(39367045)")])]),t._v(" "),t._m(33),t._v(" "),t._m(34)]),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._m(38),t._v(" "),t._m(39),t._v(" "),s("ul",[s("li",[s("p",[t._v("为了减小 "),s("code",[t._v("Swift")]),t._v(" 元数据的大小，Swift 中定义的 "),s("code",[t._v("convenience initializers")]),t._v(" 如果调用了 "),s("code",[t._v("Objective-C")]),t._v(" 中定义的一个 "),s("code",[t._v("designated initializer")]),t._v("，那只会提前分配一个对象。在大多数情况下，这对您的程序没有影响，但如果从 "),s("code",[t._v("Objective-C")]),t._v(" 调用 "),s("code",[t._v("convenience initializers")]),t._v("，那么 "),s("code",[t._v("+alloc")]),t._v(" 分配的初始内存会被释放，而不会调用任何 "),s("code",[t._v("initializer")]),t._v("。对于不希望发生任何类型的对象替换的调用者来说，这可能是有问题的。其中一个例子是 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ffoundation%2Fnscoding%2F1416145-initwithcoder%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("initWithCoder:"),s("OutboundLink")],1),t._v(" ：如果 "),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Ffoundation%2Fnskeyedunarchiver%3Flanguage%3Dobjc",target:"_blank",rel:"noopener noreferrer"}},[t._v("NSKeyedUnarchiver"),s("OutboundLink")],1),t._v(" 调用 "),s("code",[t._v("Swift")]),t._v(" 实现 "),s("code",[t._v("init(coder:)")]),t._v(" 并且存档对象存在循环时，则 "),s("code",[t._v("NSKeyedUnarchiver")]),t._v(" 的实现可能会出错。")]),t._v(" "),t._m(40)]),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43)]),t._v(" "),t._m(44),t._v(" "),s("ul",[s("li",[s("p",[t._v("扩展绑定现在支持嵌套类型的扩展，这些嵌套类型本身是在扩展内定义的。之前可能会因为一些声明顺序而失败，并产生 “未声明类型” 错误。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-631",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-631"),s("OutboundLink")],1),t._v(")")])]),t._v(" "),s("li",[s("p",[t._v("在 Swift 5 中，返回 "),s("code",[t._v("Self")]),t._v(" 的类方法不能再被使用返回非 "),s("code",[t._v("final")]),t._v(" 的具体类类型的方法来覆盖。此类代码不是类型安全的，需要更新。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-695",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-695"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("p",[t._v("例如：")])])]),t._v(" "),t._m(45),s("ul",[s("li",[s("p",[t._v("在 Swift 5 模式下，现在会明确禁止声明与嵌套类型同名的静态属性。以前，可以在泛型类型的扩展中执行这样的声明。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-7251",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-7251"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("p",[t._v("例如：")])])]),t._v(" "),t._m(46),s("ul",[t._m(47),t._v(" "),s("li",[s("p",[t._v("在 Swift 5 中，函数中的 "),s("code",[t._v("@autoclosure")]),t._v(" 参数不能再作为 "),s("code",[t._v("@autoclosure")]),t._v(" 参数传递到另一个函数中调用。相反，您必须使用括号显式调用函数值:"),s("code",[t._v("()")]),t._v("；调用本身包含在一个隐式闭包中，保证了与 "),s("code",[t._v("Swift 4")]),t._v(" 相同的行为。（"),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-5719",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-5719"),s("OutboundLink")],1),t._v("）")]),t._v(" "),s("p",[t._v("例如：")])])]),t._v(" "),t._m(48),s("ul",[t._m(49),t._v(" "),s("li",[s("p",[t._v("在 Swift 5 中，当将可选值转换为泛型占位符类型时，编译器在解包值时会更加谨慎。这种转换的结果现在更接近于非泛型上下文中的结果。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-4248",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-4248"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("p",[t._v("例如：")])])]),t._v(" "),t._m(50),t._m(51),t._v(" "),t._m(52),s("p",[t._v("Swift 4.2 接受了第二种形式，但没有完全实现，有时可能在编译时或运行时崩溃。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-5581",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-5581"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("ul",[s("li",[t._v("在 Swift 5 中，当在属性自身的 "),s("code",[t._v("didSet")]),t._v(" 或 "),s("code",[t._v("willSet")]),t._v(" 中设置属性本身时，会避免递归调用（不论是隐式或显式地设置自身的属性）。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-419",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-419"),s("OutboundLink")],1),t._v(")")])]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),t._m(53),s("ul",[t._m(54),t._v(" "),s("li",[t._v("使用泛型类型别名作为参数或 "),s("code",[t._v("@objc")]),t._v(" 方法的返回类型，不再导致生成无效的 "),s("code",[t._v("Objective-C header")]),t._v("。("),s("a",{attrs:{href:"https://link.juejin.im?target=https%3A%2F%2Fbugs.swift.org%2Fbrowse%2FSR-8697",target:"_blank",rel:"noopener noreferrer"}},[t._v("SR-8697"),s("OutboundLink")],1),t._v(")")])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"swift-5-新特性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swift-5-新特性","aria-hidden":"true"}},[this._v("#")]),this._v(" Swift 5 新特性")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("万众期待的 Swift 5 终于来了，苹果爸爸答应的 ABI 稳定也终于来了。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"app-瘦身"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-瘦身","aria-hidden":"true"}},[this._v("#")]),this._v(" App 瘦身")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"新特性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性","aria-hidden":"true"}},[this._v("#")]),this._v(" 新特性")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Swift 应用程序不再包含用于 Swift 标准库的"),s("code",[t._v("动态链接库")]),t._v("和用于运行 "),s("code",[t._v("iOS 12.2")]),t._v("，"),s("code",[t._v("watchOS 5.2")]),t._v(" 和 "),s("code",[t._v("tvOS 12.2")]),t._v(" 的设备的构建变体中的 "),s("code",[t._v("Swift SDK overlays")]),t._v("。因此，当为 "),s("code",[t._v("TestFlight")]),t._v(" 进行测试部署时，或者在为本地开发分发瘦身应用的 "),s("code",[t._v("archive")]),t._v(" 包时，Swift 应用程序可以更小。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("要对比 iOS 12.2 和 iOS 12.1(或更早版本) 瘦身后 App 的文件大小差异，可以设置 App 的 "),s("code",[t._v("deployment target")]),t._v(" 为 "),s("code",[t._v("iOS 12.1")]),t._v(" 或更早版本，设置 "),s("code",[t._v("scheme set")]),t._v(" 为 "),s("code",[t._v("Generic iOS Device")]),t._v(" 并生成一个 App 的归档。在构建完成后，在 "),s("code",[t._v("Archives organizer")]),t._v(" 选择中 "),s("code",[t._v("Distribute App")]),t._v("，然后选择 "),s("code",[t._v("Development distribution")]),t._v("。确保在 "),s("code",[t._v("App Thinning")]),t._v(" 下拉菜单中选择一个特定设备，如 "),s("code",[t._v("iPhone XS")]),t._v("。当分发完成后，在新创建的文件夹下打开 "),s("code",[t._v("App Thinning Size Report")]),t._v("。iOS 12.2 系统的变体将小于 iOS 12.1 及更早的系统的变体。确切的大小差异取决于您的 App 使用的系统框架的数量。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"swift-语言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swift-语言","aria-hidden":"true"}},[this._v("#")]),this._v(" Swift 语言")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"新特性-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 新特性")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[t._v("@dynamicCallable "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ToyCallable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" dynamicCall（withArguments："),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("）"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" dynamicCall（withKeywordArguments："),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("KeyValuePairs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String，Int")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("）"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ToyCallable")]),t._v("（）\n\nx（"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("）\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等价于`x.dynamicallyCall（withArguments：[1,2,3]）`")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("x")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 等价于`x.dynamicallyCall(withKeywordArguments: ["label": 1, "": 2])`')]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" \\"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("keyPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Prints "2"')]),t._v("\nx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("keyPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("keyPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Prints "3"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("在 Swift 5 之前，您可以编写一个带有可变参数的枚举 case：")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" X "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("baz")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" X "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("取而代之的是，让枚举的 "),e("code",[this._v("case")]),this._v(" 携带一个数组，并显式传递一个数组")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" X "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("baz")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" X "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("旧的 "),s("code",[t._v("_ExpressibleByStringInterpolation")]),t._v(" 协议被删除；如果您有使用此协议的代码，则需要做相应更新。您可以使用 "),s("code",[t._v("#if")]),t._v(" 条件判断来区分 "),s("code",[t._v("Swift 4.2")]),t._v(" 和 "),s("code",[t._v("Swift 5")]),t._v(" 的代码。例如：")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[t._v("#"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("compiler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extension")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("MyType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" _ExpressibleByStringInterpolation "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n#"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extension")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("MyType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("ExpressibleByStringInterpolation")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n#endif \n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"swift-标准库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swift-标准库","aria-hidden":"true"}},[this._v("#")]),this._v(" Swift 标准库")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"新功能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新功能","aria-hidden":"true"}},[this._v("#")]),this._v(" 新功能")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extension")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Sequence")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dropTwo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("SubSequence")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dropFirst")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extension")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Sequence")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dropTwo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("DropFirstSequence")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Self")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dropFirst")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extension")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Collection")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dropTwo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("SubSequence")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dropFirst")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"swift-包管理器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swift-包管理器","aria-hidden":"true"}},[this._v("#")]),this._v(" Swift 包管理器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"新功能-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新功能-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 新功能")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ swift package config set-mirror \\\n--package-url <original URL> --mirror-url <mirror URL>\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("swift")]),this._v(" 测试命令可以使用标志 "),e("code",[this._v("--enable-code-coverage")]),this._v("，来生成标准格式的代码覆盖率数据，以便其它代码覆盖工具使用。生成的代码覆盖率数据存储在 "),e("code",[this._v("<build-dir>/<configuration>/codecov")]),this._v(" 目录中。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("Swift 5 不再支持 "),e("code",[this._v("Swift 3")]),this._v(" 版本的软件包管理器。仍然在使用 Swift 3 Package.swift 工具版本（"),e("code",[this._v("tool-version")]),this._v("）上的软件包应该更新到新的工具版本上。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[t._v("Swift 包管理器有一个新的 "),s("code",[t._v("--disable-automatic-resolution")]),t._v(" 标志项，当 "),s("code",[t._v("Package.resolved")]),t._v(" 条目不再与 "),s("code",[t._v("Package.swift")]),t._v(" 清单文件中指定的依赖项版本兼容时，该标志项强制包解析失败。此功能对于持续集成系统非常有用，可以检查包的 "),s("code",[t._v("Package.resolved")]),t._v(" 是否已过期。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("swift run")]),this._v(" 命令有一个新的 "),e("code",[this._v("--repl")]),this._v(" 选项，它会启动 "),e("code",[this._v("Swift REPL")]),this._v("，支持导入包的库目标。这使您可以轻松地从包目标中试用 API，而无需构建调用该 API 的可执行文件。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"swift-编译器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swift-编译器","aria-hidden":"true"}},[this._v("#")]),this._v(" Swift 编译器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"新特性-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新特性-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 新特性")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("p",[t._v("Swift 3 运行模式已被删除。"),s("code",[t._v("-swift-version")]),t._v(" 标志支持的值为 "),s("code",[t._v("4")]),t._v("、"),s("code",[t._v("4.2")]),t._v(" 和 "),s("code",[t._v("5")]),t._v("。")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("在 Swift 5 中，在 "),s("code",[t._v("switch")]),t._v(" 语句中使用 "),s("code",[t._v("Objective-C")]),t._v(" 中声明的或来自系统框架的枚举时，必须处理未知的 "),s("code",[t._v("case")]),t._v("，这些 "),s("code",[t._v("case")]),t._v(" 可能将来会添加，也可能是在 "),s("code",[t._v("Objective-C")]),t._v("实现文件中私下定义。形式上，"),s("code",[t._v("Objective-C")]),t._v(" 允许在枚举中存储任何值，只要它匹配底层类型即可。这些未知的 "),s("code",[t._v("case")]),t._v(" 可以使用新的 "),s("code",[t._v("@unknown default case")]),t._v(" 来处理，当然如果 "),s("code",[t._v("switch")]),t._v(" 中省略了任何已知的 "),s("code",[t._v("case")]),t._v("，编译器仍然会给出警告。它们也可以使用普通的 "),s("code",[t._v("default case")]),t._v(" 来处理。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("如果您已在 "),s("code",[t._v("Objective-C")]),t._v(" 中定义了自己的枚举，并且不需要客户端来处理 "),s("code",[t._v("unknown case")]),t._v("，则可以使用 "),s("code",[t._v("NS_CLOSED_ENUM")]),t._v(" 宏而不是 "),s("code",[t._v("NS_ENUM")]),t._v("。Swift 编译器识别出这一点，并且不需求 "),s("code",[t._v("switch")]),t._v(" 语句必须带有 "),s("code",[t._v("default case")]),t._v("。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("现在在 "),e("code",[this._v("SourceKit")]),this._v(" 生成的 Swift 模块接口中会打印默认参数，而不仅仅是使用占位符。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[e("code",[this._v("unowned")]),this._v(" 和 "),e("code",[this._v("unowned(unsafe)")]),this._v(" 类型的变量现在支持可选类型。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"已知的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#已知的问题","aria-hidden":"true"}},[this._v("#")]),this._v(" 已知的问题")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("如果引用了 "),e("code",[this._v("UIAccessibility")]),this._v(" 结构的任何成员，则 Swift 编译器会在 “"),e("code",[this._v("Merge swiftmodule")]),this._v("” 构建步骤中崩溃。构建日志包含一条消息：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("Cross-reference to module 'UIKit'\n... UIAccessibility\n... in an extension in module 'UIKit'\n... GuidedAccessError \n复制代码\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("包含 "),e("code",[this._v("NS_ERROR_ENUM")]),this._v(" 枚举的其他类型也可能出现此问题，但 "),e("code",[this._v("UIAccessibility")]),this._v(" 是最常见的。(47152185)")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("strong",[t._v("解决方法")]),t._v("：在 "),s("code",[t._v("target")]),t._v(" 的 "),s("code",[t._v("Build Setting -> Swift Compiler -> Code Generation")]),t._v(" 下，设置 "),s("code",[t._v("Compilation Mode")]),t._v(" 的值为 "),s("code",[t._v("Whole Module")]),t._v("。这是大多数 "),s("code",[t._v("Release")]),t._v(" 配置的默认设置。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("在将来的版本中，编译器将保证一个 "),s("code",[t._v("convenience initializer")]),t._v(" 永远不会丢弃它所调用的对象，只要它通过 "),s("code",[t._v("self.init")]),t._v(" 委托给它的初始化程序也暴露给 "),s("code",[t._v("Objective-C")]),t._v("，或者是它在 "),s("code",[t._v("Objective-C")]),t._v(" 中定义了，或者是使用 "),s("code",[t._v("@objc")]),t._v(" 标记的，或者是重写了一个暴露给 "),s("code",[t._v("Objective-C")]),t._v(" 的 "),s("code",[t._v("initializer")]),t._v("，或者是它满足 "),s("code",[t._v("@objc")]),t._v(" 协议的要求。(46823518)")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("p",[t._v("如果一个 "),s("code",[t._v("keypath")]),t._v(" 字面量引用了 "),s("code",[t._v("Objective-C")]),t._v(" 中定义的属性，或者是在 "),s("code",[t._v("Swift")]),t._v(" 中使用 "),s("code",[t._v("@objc")]),t._v(" 和 "),s("code",[t._v("dynamic")]),t._v(" 修饰符定义的属性，则编译可能会失败，并且报 “"),s("code",[t._v("unsupported relocation of local symbol 'L_selector'")]),t._v("” 错误，或者 key path 字面量无法在运行时生成正确的哈希值或处理相等比较。")]),t._v(" "),s("p",[s("strong",[t._v("解决方法")]),t._v("：您可以定义一个不是 "),s("code",[t._v("@objc")]),t._v(" 修饰的包装属性，来引用这个 "),s("code",[t._v("key path")]),t._v("。得到的 "),s("code",[t._v("key path")]),t._v(" 与引用原始 "),s("code",[t._v("Objective-C")]),t._v(" 属性的 "),s("code",[t._v("key path")]),t._v(" 不相等，但使用包装属性效果是相同的。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("某些项目可能会遇到以前版本的编译时回归。")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("p",[t._v("Swift 命令行项目在启动时因抛出 “"),s("code",[t._v("dyld：Library not loaded")]),t._v("” 错误而崩溃。")]),t._v(" "),s("p",[s("strong",[t._v("解决方法")]),t._v("：添加自定义的构建设置 "),s("code",[t._v("SWIFT_FORCE_STATIC_LINK_STDLIB=YES")]),t._v("。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"已解决的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#已解决的问题","aria-hidden":"true"}},[this._v("#")]),this._v(" 已解决的问题")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Base")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("factory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Self")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Derived")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Base")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("override")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("factory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Derived")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Foo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("T"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extension")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Foo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Error: Invalid redeclaration of 'i'.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (Prior to Swift 5, this didn’t produce an error.) ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("现在可以在子类里继承父类中具有可变参数的初始化方法。")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" @autoclosure "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" @autoclosure "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Incorrect, `fn` can’t be forwarded and has to be called.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// OK")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("p",[this._v("现在完全支持在类和泛型中定义复杂的递归类型，而此前可能会导致死锁。")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" forceCast"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("U"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" U"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" U "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" U \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forceCast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Prints "Optional(42)"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// (Prior to Swift 5, this would print "42".)')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Prints "Optional(42)"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("协议现在可以将它们的实现类型限定为指定类型的子类。支持两种等效形式：")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protocol")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("MyView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIView")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protocol")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("MyView")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIView")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-swift extra-class"},[s("pre",{pre:!0,attrs:{class:"language-swift"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Node")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" children "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Node")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" depth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("didSet")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" depth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Won’t recursively call didSet, because this is setting depth on self. ")]),t._v("\n                depth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Will call didSet for each of the children,")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// as this isn’t setting the property on self.")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (Prior to Swift 5, this didn’t trigger property")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// observers to be called again.)")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" child "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" children "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n                child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("depth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" depth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[t._v("Xcode中 的 "),s("code",[t._v("diagnostics")]),t._v(" 对 "),s("code",[t._v("#sourceLocation")]),t._v(" 进行了支持。也就是说，如果您使用"),s("code",[t._v("#sourceLocation")]),t._v(" 将生成的文件中的行映射回源代码时，"),s("code",[t._v("diagnostics")]),t._v(" 会显示在原始源文件中的行数而不是生成的文件中的。")])}],!1,null,null,null);e.default=n.exports}}]);