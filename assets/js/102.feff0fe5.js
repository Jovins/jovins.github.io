(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{405:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),a("p",[a("a",{attrs:{href:"https://github.com/facebookarchive/AsyncDisplayKit/issues/426",target:"_blank",rel:"noopener noreferrer"}},[t._v("github上的相关讨论"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("还有就是如果需要改变ASButtonNode 的 imageNode 的 tintColor，是改不了的，需要通过设置不同状态的图片，然后通过改变buttonNode的状态来改变图片。")]),t._v(" "),t._m(4),t._m(5),t._v(" "),a("p",[t._v("当 spaceBetween 没有达到两端对齐的效果，尝试设置当前 layoutSpec 的 width（如注释）或它的上一级布局对象的 alignItems，在例子中就是 stackLayout.alignItems = .stretch。")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),a("p",[t._v("需要在didLoad中添加")]),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),a("p",[t._v("ASTextNode2 目前尚未支持通过添加 NSTextAttachment 的方式在 NSAttributedString 后面添加图片，如果需要实现上面的需求要使用ASTextNode。")]),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("为了复用一些布局，比如个人界面的设置Cell，采用了在ASCellNode使用viewBlock方法来复用Cell。")]),t._v(" "),t._m(16),a("p",[t._v("显示出来的布局是正常的，在iOS 11上点击也可以跳转，但是今天在iOS 10上测试的时候发现无法响应点击事件，如果是用UIView生成也可以响应点击事件，怀疑是UITableViewCell拦截了点击事件，但是为什么在iOS 11上可以，iOS 10上就不可以？不知道。加上 ：")]),t._v(" "),t._m(17),a("p",[t._v("在iOS 10也可以响应点击事件了。")]),t._v(" "),t._m(18),t._v(" "),a("p",[t._v("ASEditableTextNode 默认高度只能适应英文字母，如果输入中文会发现被裁了一截，所以在初始化时需要指定一下 ASEditableTextNode 的高度")]),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._m(24),t._v(" "),a("p",[t._v("ASTableNode(ASCollectionNode) 与 UITableView(UICollectionView) 最大的不同应该是 ASTableNode(ASCollectionNode) 的 cellNode 没有复用机制，所以在 ASTableNode(ASCollectionNode) 中滚动时，经过多少个 cellNode 就会生成多少个 cellNode，这让 ASTableNode(ASCollectionNode) 占用的内存会比 UITableView(UICollectionView) 大不少，尤其是 cellNode 中包含图片或者 Gif 时。")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"texture-开发笔记"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#texture-开发笔记","aria-hidden":"true"}},[this._v("#")]),this._v(" Texture 开发笔记")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"asimagenode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#asimagenode","aria-hidden":"true"}},[this._v("#")]),this._v(" ASImageNode")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("ASImageNode 不支持直接设置 "),e("code",[this._v("tintColor")]),this._v(" ，如果需要设置 tintColor需要通过 "),e("code",[this._v("imageModificationBlock")]),this._v(" 进行设置：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-objective-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("imageNode.imageModificationBlock = ASImageNodeTintColorModificationBlock(UIColor.white)\n")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[t._v("buttonNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("normal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbuttonNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tinted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("UIColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("red"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selected"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"aslayoutspec"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aslayoutspec","aria-hidden":"true"}},[this._v("#")]),this._v(" ASLayoutSpec")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("ASDisplayNode的高度计算")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("如果在 UIView 或者UITableViewCell中添加ASDisplayNode，而且需要计算ASDisplayNode的高度，在 ASDisplayNode 实现了"),e("code",[this._v("- (ASLayoutSpec *)layoutSpecThatFits:(ASSizeRange)constrainedSize")]),this._v(" 情况下，可以调用 "),e("code",[this._v("- (ASLayout *)layoutThatFits:(ASSizeRange)constrainedSize")]),this._v(" 方法计算出大小。")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("_")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("layoutThatFits")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ASSizeRangeMake")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("CGSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zero"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t\t\t\t  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("CGSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\theight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("CGFloat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("greatestFiniteMagnitude"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("calculatedSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("给 ASDisplayNode 的 View 添加手势")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("-didLoad\nThis method is conceptually similar to UIViewController’s -viewDidLoad method; it’s called once and is the point where the backing view has been loaded. It is guaranteed to be called on the main thread and is the appropriate place to do any UIKit things (such as adding gesture recognizers, touching the view / layer, initializing UIKit objects).")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("/** @name View Lifecycle */\n    \n    /**\n     * @abstract Called on the main thread immediately after self.view is created.\n     *\n     * @discussion This is the best time to add gesture recognizers to the view.\n     */\nopen func didLoad()\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("ASDisplayNode 使用 initWithViewBlock 方法进行初始化")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("需要注意 "),e("code",[this._v("retain cycle")]),this._v(" 的问题，持有 self 变量要设置为 "),e("code",[this._v("weak")]),this._v("。另外ASDisplayNode 并不知道自己持有的View的大小，需要对 "),e("code",[this._v("style.preferredSize")]),this._v(" 进行设置。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("ASTextNode2 attachment的问题")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("ASCellNode里面再嵌套UITableViewCell")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("let cellNode = ASCellNode(viewBlock: { () -> UIView in\n\t\t\t\t\t\tlet cell = UITableViewCell(style: .default, reuseIdentifier: nil)\n\t//\t\t\t\t\tcell.isUserInteractionEnabled = false\n\t\t\t\t\t\treturn cell\n\t\t\t\t\t})\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("cell.isUserInteractionEnabled = false\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"aseditabletextnode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aseditabletextnode","aria-hidden":"true"}},[this._v("#")]),this._v(" ASEditableTextNode")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" editableTextNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ASEditableTextNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\neditableTextNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ASDimensionMake")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("44")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"astablenode-和-ascollectionnode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#astablenode-和-ascollectionnode","aria-hidden":"true"}},[this._v("#")]),this._v(" ASTableNode 和 ASCollectionNode")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("ASTableNode，ASCollectionNode调用reloadData时闪烁的问题")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("在ASTableNode和ASCollectionNode需要刷新时不推荐直接使用 "),a("code",[t._v("reloadData")]),t._v(" ，直接调用 "),a("code",[t._v("reloadData")]),t._v(" 时会发现整个node都会闪一下。\n一个比较好的解决方法是每次刷新算出需要添加，删除或者刷新的 "),a("code",[t._v("indexPath")]),t._v(" 或者 "),a("code",[t._v("section")]),t._v("，再对这部分调用对应的局部刷新方法。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-objective-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("// indexPaths\n- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation;\n- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation;\n- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation;\n\n// sections\n- (void)insertSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;\n- (void)deleteSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;\n- (void)reloadSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("ASTableNode，ASCollectionNode 的 cellNode 没有复用的问题")])])}],!1,null,null,null);e.default=n.exports}}]);