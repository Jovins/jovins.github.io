<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SwiftUI官方教程二: 创建和组合视图 | Jovins Blog</title>
    <meta name="description" content="Work Hard, Play Hard">
    <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.fa6af71c.css" as="style"><link rel="preload" href="/assets/js/app.b460ff26.js" as="script"><link rel="preload" href="/assets/js/2.be69c04c.js" as="script"><link rel="prefetch" href="/assets/js/10.9a8c21f8.js"><link rel="prefetch" href="/assets/js/100.32f8d918.js"><link rel="prefetch" href="/assets/js/101.8127f851.js"><link rel="prefetch" href="/assets/js/102.4d856f8c.js"><link rel="prefetch" href="/assets/js/103.4818ceaf.js"><link rel="prefetch" href="/assets/js/104.9f8b7de5.js"><link rel="prefetch" href="/assets/js/105.98886b23.js"><link rel="prefetch" href="/assets/js/106.ae0097a1.js"><link rel="prefetch" href="/assets/js/107.d700d3b8.js"><link rel="prefetch" href="/assets/js/108.f92baae9.js"><link rel="prefetch" href="/assets/js/109.cb9baa42.js"><link rel="prefetch" href="/assets/js/11.a646350c.js"><link rel="prefetch" href="/assets/js/110.fb8cdd83.js"><link rel="prefetch" href="/assets/js/111.d058bf3b.js"><link rel="prefetch" href="/assets/js/12.8d233173.js"><link rel="prefetch" href="/assets/js/13.a05f5ef9.js"><link rel="prefetch" href="/assets/js/14.b5d4941a.js"><link rel="prefetch" href="/assets/js/15.a868b446.js"><link rel="prefetch" href="/assets/js/16.63e22cd2.js"><link rel="prefetch" href="/assets/js/17.389f7b15.js"><link rel="prefetch" href="/assets/js/18.f3c403a8.js"><link rel="prefetch" href="/assets/js/19.f39a6fd1.js"><link rel="prefetch" href="/assets/js/20.1223fa52.js"><link rel="prefetch" href="/assets/js/21.a80e25a7.js"><link rel="prefetch" href="/assets/js/22.558c5844.js"><link rel="prefetch" href="/assets/js/23.18b31744.js"><link rel="prefetch" href="/assets/js/24.72ccdfd6.js"><link rel="prefetch" href="/assets/js/25.a6d37773.js"><link rel="prefetch" href="/assets/js/26.041c20a5.js"><link rel="prefetch" href="/assets/js/27.d8af0ccb.js"><link rel="prefetch" href="/assets/js/28.7b847204.js"><link rel="prefetch" href="/assets/js/29.e716c0ae.js"><link rel="prefetch" href="/assets/js/3.e0cfe72b.js"><link rel="prefetch" href="/assets/js/30.63374197.js"><link rel="prefetch" href="/assets/js/31.e3121e76.js"><link rel="prefetch" href="/assets/js/32.ca3347cb.js"><link rel="prefetch" href="/assets/js/33.61aff4de.js"><link rel="prefetch" href="/assets/js/34.8f5afdf3.js"><link rel="prefetch" href="/assets/js/35.25f91680.js"><link rel="prefetch" href="/assets/js/36.2ecf564e.js"><link rel="prefetch" href="/assets/js/37.bcbd95da.js"><link rel="prefetch" href="/assets/js/38.6f506ecc.js"><link rel="prefetch" href="/assets/js/39.bc297393.js"><link rel="prefetch" href="/assets/js/4.c3bac3ec.js"><link rel="prefetch" href="/assets/js/40.8df7551b.js"><link rel="prefetch" href="/assets/js/41.50a1d981.js"><link rel="prefetch" href="/assets/js/42.e2eaa5ac.js"><link rel="prefetch" href="/assets/js/43.a7925e98.js"><link rel="prefetch" href="/assets/js/44.0b5ceda6.js"><link rel="prefetch" href="/assets/js/45.ad836425.js"><link rel="prefetch" href="/assets/js/46.96ec60ba.js"><link rel="prefetch" href="/assets/js/47.e1a677c1.js"><link rel="prefetch" href="/assets/js/48.fba51daf.js"><link rel="prefetch" href="/assets/js/49.ed69edb5.js"><link rel="prefetch" href="/assets/js/5.53bf2091.js"><link rel="prefetch" href="/assets/js/50.c6c0ba6c.js"><link rel="prefetch" href="/assets/js/51.38090324.js"><link rel="prefetch" href="/assets/js/52.a6db48c7.js"><link rel="prefetch" href="/assets/js/53.5b286ced.js"><link rel="prefetch" href="/assets/js/54.304d1ef4.js"><link rel="prefetch" href="/assets/js/55.465ee1fd.js"><link rel="prefetch" href="/assets/js/56.1bb1db3c.js"><link rel="prefetch" href="/assets/js/57.994e0334.js"><link rel="prefetch" href="/assets/js/58.917d4a93.js"><link rel="prefetch" href="/assets/js/59.d3846dd3.js"><link rel="prefetch" href="/assets/js/6.ea73251f.js"><link rel="prefetch" href="/assets/js/60.d11fb54a.js"><link rel="prefetch" href="/assets/js/61.71c5d846.js"><link rel="prefetch" href="/assets/js/62.3ce96686.js"><link rel="prefetch" href="/assets/js/63.b476bb38.js"><link rel="prefetch" href="/assets/js/64.275ae3d0.js"><link rel="prefetch" href="/assets/js/65.8c03107d.js"><link rel="prefetch" href="/assets/js/66.c5ddee13.js"><link rel="prefetch" href="/assets/js/67.ed60a4e5.js"><link rel="prefetch" href="/assets/js/68.ee80e055.js"><link rel="prefetch" href="/assets/js/69.fb5a5806.js"><link rel="prefetch" href="/assets/js/7.d6abc2a1.js"><link rel="prefetch" href="/assets/js/70.5c5a1b1c.js"><link rel="prefetch" href="/assets/js/71.820441e8.js"><link rel="prefetch" href="/assets/js/72.ac8d8471.js"><link rel="prefetch" href="/assets/js/73.09032331.js"><link rel="prefetch" href="/assets/js/74.dbcaa9fe.js"><link rel="prefetch" href="/assets/js/75.427fd289.js"><link rel="prefetch" href="/assets/js/76.0f3f71ee.js"><link rel="prefetch" href="/assets/js/77.11e883e6.js"><link rel="prefetch" href="/assets/js/78.00f2e08e.js"><link rel="prefetch" href="/assets/js/79.58b8afc4.js"><link rel="prefetch" href="/assets/js/8.78a91b01.js"><link rel="prefetch" href="/assets/js/80.3a185ae5.js"><link rel="prefetch" href="/assets/js/81.71186e95.js"><link rel="prefetch" href="/assets/js/82.4ac8e9de.js"><link rel="prefetch" href="/assets/js/83.753847c5.js"><link rel="prefetch" href="/assets/js/84.c437a3b3.js"><link rel="prefetch" href="/assets/js/85.59699eb8.js"><link rel="prefetch" href="/assets/js/86.7ee7d6eb.js"><link rel="prefetch" href="/assets/js/87.0e17d3e4.js"><link rel="prefetch" href="/assets/js/88.ad884a07.js"><link rel="prefetch" href="/assets/js/89.9d80d4eb.js"><link rel="prefetch" href="/assets/js/9.c81d6dd3.js"><link rel="prefetch" href="/assets/js/90.3ac7206d.js"><link rel="prefetch" href="/assets/js/91.2a0b6b84.js"><link rel="prefetch" href="/assets/js/92.c2b3eeb7.js"><link rel="prefetch" href="/assets/js/93.909cd7d0.js"><link rel="prefetch" href="/assets/js/94.121cf75a.js"><link rel="prefetch" href="/assets/js/95.68e89ab6.js"><link rel="prefetch" href="/assets/js/96.ac526db4.js"><link rel="prefetch" href="/assets/js/97.eef63bc4.js"><link rel="prefetch" href="/assets/js/98.101df9cf.js"><link rel="prefetch" href="/assets/js/99.15529e4d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fa6af71c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jovins Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/source/swift/" class="nav-link">Swift</a></div><div class="nav-item"><a href="/source/swiftui/" class="nav-link router-link-active">SwiftUI</a></div><div class="nav-item"><a href="/source/summary/" class="nav-link">Summary</a></div><div class="nav-item"><a href="/source/go/" class="nav-link">Go</a></div><div class="nav-item"><a href="/source/program/" class="nav-link">小程序</a></div><div class="nav-item"><a href="/source/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/source/git/" class="nav-link">Git</a></div><div class="nav-item"><a href="https://github.com/Jovins" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/source/swift/" class="nav-link">Swift</a></div><div class="nav-item"><a href="/source/swiftui/" class="nav-link router-link-active">SwiftUI</a></div><div class="nav-item"><a href="/source/summary/" class="nav-link">Summary</a></div><div class="nav-item"><a href="/source/go/" class="nav-link">Go</a></div><div class="nav-item"><a href="/source/program/" class="nav-link">小程序</a></div><div class="nav-item"><a href="/source/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/source/git/" class="nav-link">Git</a></div><div class="nav-item"><a href="https://github.com/Jovins" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>SwiftUI 官方教程</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/source/swiftui/" class="sidebar-link">SwiftUI 官方教程一: SwiftUI</a></li><li><a href="/source/swiftui/SwiftUI-tutorial-02.html" class="active sidebar-link">SwiftUI官方教程二: 创建和组合视图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/source/swiftui/SwiftUI-tutorial-02.html#_1-创建一个项目并且浏览canvas" class="sidebar-link">1.创建一个项目并且浏览Canvas</a></li><li class="sidebar-sub-header"><a href="/source/swiftui/SwiftUI-tutorial-02.html#_2-自定义-text-view" class="sidebar-link">2.自定义 Text View</a></li><li class="sidebar-sub-header"><a href="/source/swiftui/SwiftUI-tutorial-02.html#_3-用-stacks-组合-view" class="sidebar-link">3.用 Stacks 组合 View</a></li><li class="sidebar-sub-header"><a href="/source/swiftui/SwiftUI-tutorial-02.html#_4-自定义-image-view" class="sidebar-link">4.自定义 Image View</a></li><li class="sidebar-sub-header"><a href="/source/swiftui/SwiftUI-tutorial-02.html#_5-同时使用-uikit-和-swiftui" class="sidebar-link">5.同时使用 UIKit 和 SwiftUI</a></li><li class="sidebar-sub-header"><a href="/source/swiftui/SwiftUI-tutorial-02.html#_6-编写详情-view" class="sidebar-link">6.编写详情 View</a></li></ul></li><li><a href="/source/swiftui/SwiftUI-tutorial-03.html" class="sidebar-link">SwiftUI 官方教程三: 构建列表与导航</a></li><li><a href="/source/swiftui/SwiftUI-tutorial-04.html" class="sidebar-link">SwiftUI 官方教程四: 处理用户输入</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="swiftui官方教程二-创建和组合视图"><a href="#swiftui官方教程二-创建和组合视图" aria-hidden="true" class="header-anchor">#</a> SwiftUI官方教程二: 创建和组合视图</h1> <p><a href="https://github.com/Jovins/SwiftUI-Training" target="_blank" rel="noopener noreferrer">Demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>本教程将指引你构建一个发现和分享您喜爱地方的 iOS app —— <code>Landmarks</code> 。首先我们来构建显示地标详细信息的 view。</p> <p><code>Landmarks</code> 使用 <code>stacks</code> 将 <code>image</code>、<code>text</code> 等组件进行组合和分层，以此来给 view 布局。如果想给视图添加地图，我们需要引入标准 <code>MapKit</code> 组件。在我们调整设计时，Xcode 可以作出实时反馈，以便我们看到这些调整是如何转换为代码的。</p> <h2 id="_1-创建一个项目并且浏览canvas"><a href="#_1-创建一个项目并且浏览canvas" aria-hidden="true" class="header-anchor">#</a> 1.创建一个项目并且浏览Canvas</h2> <p>创建一个使用SwiftUI的新Xcode项目。浏览画布、预览和SwiftUI模板代码。</p> <p>要在Xcode中预览画布上的视图并与之交互，请确保您的Mac运行的是macOS 10.15 beta版。</p> <p><strong>步骤一</strong></p> <p>打开 Xcode ，在 Xcode 的启动窗口中单击 <code>Create a new Xcode project</code> ，或选择 <code>File</code> &gt; <code>New</code> &gt; <code>Project</code> 。</p> <p><img src="/assets/img/SwiftUI-07.f9e19e06.png" alt></p> <p><strong>步骤二</strong></p> <p>在模板选择器中，选择iOS作为平台，选择<strong>Single View App</strong>，然后单击Next。</p> <p><img src="/assets/img/SwiftUI-08.6384a487.png" alt></p> <p><strong>步骤三</strong></p> <p>输入 <code>Landmarks</code> 作为 <code>Product Name</code> ，勾选 <code>Use SwiftUI</code> 复选框，然后单击 <code>Next</code> 。选择一个位置保存此项目。</p> <p><img src="/assets/img/SwiftUI-09.05151fab.png" alt></p> <p><strong>步骤四</strong></p> <p>在 <code>Project navigator</code> 中，选中 <code>ContentView.swift</code> 。</p> <p>默认情况下， <code>SwiftUI</code> view 文件声明了两个结构体。第一个结构体遵循 <code>View</code> 协议，描述 view 的内容和布局。第二个结构体声明该 view 的预览。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-10.e6b733b5.png" alt></p> <p><strong>步骤五</strong></p> <p>在 <code>canvas</code> 中，单击 <code>Resume</code> 来显示预览。</p> <blockquote><p>Tip：如果没有 <code>canvas</code> ，选择 <code>Editor</code> &gt; <code>Editor and Canvas</code> 来显示。</p></blockquote> <p><img src="/assets/img/SwiftUI-11.1013b84e.png" alt></p> <p><strong>步骤六</strong></p> <p>在 <code>body</code> 属性中，将 <code>Hello World</code> 更改为自己的问候语。更改代码时，预览便会实时更新。</p> <blockquote><p>ContentView.swift</p></blockquote> <div class="language-swift extra-class"><pre class="language-swift"><code>
<span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Hello SwiftUI!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-12.200574dc.png" alt></p> <h2 id="_2-自定义-text-view"><a href="#_2-自定义-text-view" aria-hidden="true" class="header-anchor">#</a> 2.自定义 Text View</h2> <p>为了自定义 view 的显示，我们可以自己更改代码，或者使用 <code>inspector</code>来帮助我们编写代码。</p> <p>在构建 <code>Landmarks</code> 的过程中，我们可以使用任何编辑器来工作：编写源码、修改 <code>canvas</code>、或者通过 <code>inspectors</code> ，无论使用哪种工具，代码都会保持更新。</p> <p>![img](file:///Users/jovins/Blog/docs/source/images/SwiftUI-13.gif?lastModify=1560591119)</p> <p>接下来，我们使用 <code>inspector</code> 来自定义 <code>text view</code> 。</p> <p><strong>步骤一</strong></p> <p>在预览中，按住 <code>Command</code> 并单击问候语来显示编辑窗口，然后选择 <code>Inspect</code> 。</p> <p>编辑窗口显示了可以修改的不同属性，具体取决于其 view 类型。</p> <p>![img](file:///Users/jovins/Blog/docs/source/images/SwiftUI-14.png?lastModify=1560591119)</p> <p><strong>步骤二</strong></p> <p>用 <code>inspector</code> 将文本改为 <code>Turtle Rock</code> ，这是在 app 中显示的第一个地标的名字。</p> <p>![img](file:///Users/jovins/Blog/docs/source/images/SwiftUI-15.png?lastModify=1560591119)</p> <p><strong>步骤三</strong></p> <p>将 <code>Font</code> 修改为 <code>Title</code> 。</p> <p>这个修改会让文本使用系统字体，之后它就能正确显示用户的偏好字体大小和设置。</p> <p>![img](file:///Users/jovins/Blog/docs/source/images/SwiftUI-16.png?lastModify=1560591119)</p> <p><strong>步骤四</strong></p> <p>在代码中添加 <code>.color(.green)</code> ，将文本的颜色更改为绿色。</p> <p>如果想自定义 <code>SwiftUI</code> 的 view，我们可以调用一类叫做 <code>modifiers</code> 的方法。这类方法通过包装一个 view 来改变它的显示或者其他属性。每个 <code>modifiers</code> 方法会返回一个新的 view，因此我们可以链式调用多个 <code>modifiers</code> 方法。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">.</span>green<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-17.4b106241.png" alt></p> <h2 id="_3-用-stacks-组合-view"><a href="#_3-用-stacks-组合-view" aria-hidden="true" class="header-anchor">#</a> 3.用 Stacks 组合 View</h2> <p>在上一节创建标题 view 后，我们来添加 text view，它用来显示地标的详细信息，比如公园的名称和所在的州。</p> <p>在创建 <code>SwiftUI</code> view 时，我们可以在 view 的 <code>body</code> 属性中描述其内容、布局和行为。由于 <code>body</code> 属性仅返回单个 view，所以我们可以使用 <code>Stacks</code> 来组合和嵌入多个 view，让它们以水平、垂直或从后到前的顺序组合在一起。</p> <p>在本节中，我们使用水平的 <code>stack</code> 来显示公园的详细信息，再用垂直的 <code>stack</code> 将标题放在详细信息的上面。</p> <p><img src="/Users/jovins/Blog/docs/source/images/SwiftUI-20.png" alt></p> <p>我们可以使用 Xcode 的编辑功能将 view 嵌入到一个容器里，也可以使用 <code>inspector</code> 或者 <code>help</code>找到更多帮助。</p> <p><strong>步骤一</strong></p> <p>按住 <code>Command</code> 并单击 text view 的初始化方法，在编辑窗口中选择 <code>Embed in VStack</code> 。</p> <p><img src="/assets/img/SwiftUI-21.061a9ae7.png" alt></p> <p>接下来，我们从 <code>Library</code> 中拖一个 <code>Text view</code> 添加到 <code>stack</code> 中。</p> <p><strong>步骤二</strong></p> <p>单击 Xcode 右上角的加号按钮 <code>(+)</code> 打开 <code>Library</code> ，然后拖一个 <code>Text view</code> ，放在代码中 <code>Turtle Rock</code> 的后面。</p> <p><img src="/assets/img/SwiftUI-22.7cefbdc2.png" alt></p> <p><strong>步骤三</strong></p> <p>将 <code>Placeholder</code> 改成 <code>Joshua Tree National Park</code> 。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token builtin">VStack</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>调整地点 view 以满足布局需求。</p> <p><strong>步骤四</strong></p> <p>将地点 view 的 <code>font</code> 设置成 <code>.subheadline</code> 。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token builtin">VStack</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>步骤五</strong></p> <p>编辑 <code>VStack</code> 的初始化方法，将 view 以 <code>leading</code> 方式对齐。</p> <p>默认情况下， <code>stacks</code> 会将内容沿其轴居中，并设置适合上下文的间距。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span><span class="token number">3</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来，我们在地点的右侧添加另一个 text view 来显示公园所在的州。</p> <p><strong>步骤六</strong></p> <p>在 <code>canvas</code> 中按住 <code>Command</code> ，单击 <code>Joshua Tree National Park</code> ，然后选择 <code>Embed in HStack</code> 。</p> <p><img src="/assets/img/SwiftUI-23.d7865db3.png" alt></p> <p><strong>步骤七</strong></p> <p>在地点后新加一个 text view，将 <code>Placeholder</code> 修改成 <code>California</code> ，然后将 <code>font</code> 设置成 <code>.subheadline</code> 。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token builtin">HStack</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-24.9b7fc0c0.png" alt></p> <p><strong>步骤八</strong></p> <p>在水平 <code>stack</code> 中添加一个 <code>Spacer</code> 来分割及固定 <code>Joshua Tree National Park</code> 和 <code>California</code> ，这样它们就会共享整个屏幕宽度。</p> <p><code>spacer</code> 能展开它包含的 view ，使它们共用其父 view 的所有空间，而不是仅通过其内容定义其大小。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token builtin">HStack</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-25.e8f45ee3.png" alt></p> <p><strong>步骤九</strong></p> <p>最后，用 <code>.padding()</code> 这个修饰方法给地标的名称和信息留出一些空间。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token builtin">HStack</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-26.d44e22c3.png" alt></p> <h2 id="_4-自定义-image-view"><a href="#_4-自定义-image-view" aria-hidden="true" class="header-anchor">#</a> 4.自定义 Image View</h2> <p>搞定名称和位置 view 后，我们来给地标添加图片。</p> <p>这不需要添加很多代码，只需要创建一个自定义 view，然后给图片加上遮罩、边框和阴影即可。</p> <p><img src="/assets/img/SwiftUI-27.5847aa03.gif" alt></p> <p>首先将图片添加到项目的 <code>asset catalog</code> 中。</p> <p><strong>步骤一</strong></p> <p>在项目的 <code>Resources</code> 文件夹中找到 <code>turtlerock.png</code> ，将它拖到 <code>asset catalog</code> 的编辑器中。 Xcode 会给图片创建一个 <code>image set</code> 。</p> <p><img src="/assets/img/SwiftUI-28.46f48f37.png" alt></p> <p>接下来，创建一个新的 <code>SwiftUI</code> view 来自定义 image view。</p> <p><strong>步骤二</strong></p> <p>选择 <code>File</code> &gt; <code>New</code> &gt; <code>File</code> 打开模板选择器。在 <code>User Interface</code> 中，选中 <code>SwiftUI View</code>，然后单击 <code>Next</code> 。将文件命名为 <code>CircleImage.swift</code> ，然后单击 <code>Create</code> 。</p> <p><img src="/assets/img/SwiftUI-29.7973a0d4.png" alt></p> <p>现在准备工作已完成。</p> <p><strong>步骤三</strong></p> <p>使用 <code>Image(_:)</code> 初始化方法将 text view 替换为 <code>Turtle Rock</code> 的图片。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">&quot;turtlerock&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-30.c89c47c5.png" alt></p> <p><strong>步骤四</strong></p> <p>调用 <code>.clipShape(Circle())</code> ，将图像裁剪成圆形。</p> <p><code>Circle</code> 可以当做一个蒙版的形状，也可以通过 <code>stroke</code> 或 <code>fill</code> 形成 view。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">&quot;turtlerock&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">clipShape</span><span class="token punctuation">(</span><span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-31.5da0974a.png" alt></p> <p><strong>步骤五</strong></p> <p>创建另一个 <code>gray stroke</code> 的 <code>circle</code> ，然后将其作为 <code>overlay</code> 添加到图片上，形成图片的边框。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">&quot;turtlerock&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">clipShape</span><span class="token punctuation">(</span><span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">overlay</span><span class="token punctuation">(</span>
                <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token builtin">Color</span><span class="token punctuation">.</span>gray<span class="token punctuation">,</span> lineWidth<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-32.f3d5dbd8.png" alt></p> <p><strong>步骤六</strong></p> <p>接来下，添加一个半径为 10 point 的阴影。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">&quot;turtlerock&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">clipShape</span><span class="token punctuation">(</span><span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">overlay</span><span class="token punctuation">(</span>
                <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token builtin">Color</span><span class="token punctuation">.</span>gray<span class="token punctuation">,</span> lineWidth<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-33.bb401a2a.png" alt></p> <p><strong>步骤七</strong></p> <p>将边框的颜色改为 <code>white</code> ，完成 image view。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">&quot;turtlerock&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">clipShape</span><span class="token punctuation">(</span><span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">overlay</span><span class="token punctuation">(</span>
                <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token builtin">Color</span><span class="token punctuation">.</span>white<span class="token punctuation">,</span> lineWidth<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">CircleImage_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-34.d05f221f.png" alt></p> <h2 id="_5-同时使用-uikit-和-swiftui"><a href="#_5-同时使用-uikit-和-swiftui" aria-hidden="true" class="header-anchor">#</a> 5.同时使用 UIKit 和 SwiftUI</h2> <p>现在我们已准备好创建 map view 了，接下来使用 <code>MapKit</code> 中的 <code>MKMapView</code> 类来渲染地图。</p> <p>在 <code>SwiftUI</code> 中使用 <code>UIView</code> 子类，需要将其他 view 包装在遵循 <code>UIViewRepresentable</code> 协议的 <code>SwiftUI</code> view 中。 <code>SwiftUI</code> 包含了和 <code>WatchKit</code> 、 <code>AppKit</code> view 类似的协议。</p> <p><img src="/assets/img/SwiftUI-35.3bcf889c.png" alt></p> <p>首先，我们创建一个可以呈现 <code>MKMapView</code> 的自定义 view。</p> <p><strong>步骤一</strong></p> <p>选择 <code>File</code> &gt; <code>New</code> &gt; <code>File</code> ，选择 <code>iOS</code> 平台，选择 <code>SwiftUI View</code> 模板，然后单击 <code>Next</code>。将新文件命名为 <code>MapView.swift</code> ，然后单击 <code>Create</code> 。</p> <p><img src="/assets/img/SwiftUI-36.2728ffa7.png" alt></p> <p><strong>步骤二</strong></p> <p>给 <code>MapKit</code> 添加 <code>import</code> 语句，声明 <code>MapView</code> 类型遵循 <code>UIViewRepresentable</code> 。</p> <p>可以忽略 Xcode 的错误，接下来的几步会解决这些问题。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>
<span class="token keyword">import</span> <span class="token builtin">MapKit</span>

<span class="token keyword">struct</span> <span class="token builtin">MapView</span><span class="token punctuation">:</span> <span class="token builtin">UIViewRepresentable</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">MapView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>UIViewRepresentable</code> 协议需要实现两个方法： <code>makeUIView(context:)</code> 用来创建一个 <code>MKMapView</code>， <code>updateUIView(_:context:)</code> 用来配置 view 并响应修改。</p> <p><strong>步骤三</strong></p> <p>用 <code>makeUIView(context:)</code> 方法替换 <code>body</code> 属性，该方法创建并返回一个空的 <code>MKMapView</code>。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>
<span class="token keyword">import</span> <span class="token builtin">MapKit</span>

<span class="token keyword">struct</span> <span class="token builtin">MapView</span><span class="token punctuation">:</span> <span class="token builtin">UIViewRepresentable</span> <span class="token punctuation">{</span>
	
	<span class="token keyword">typealias</span> <span class="token builtin">UIViewType</span> <span class="token operator">=</span> <span class="token builtin">MKMapView</span>

    <span class="token keyword">func</span> <span class="token function">makeUIView</span><span class="token punctuation">(</span>context<span class="token punctuation">:</span> <span class="token builtin">UIViewRepresentableContext</span><span class="token operator">&lt;</span><span class="token builtin">MapView</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">MKMapView</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">MKMapView</span><span class="token punctuation">(</span>frame<span class="token punctuation">:</span> <span class="token punctuation">.</span>zero<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">MapView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>步骤四</strong></p> <p>实现 <code>updateUIView(_:context:)</code> 方法，给 map view 设置坐标，使其在 <code>Turtle Rock</code> 上居中。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>
<span class="token keyword">import</span> <span class="token builtin">MapKit</span>

<span class="token keyword">struct</span> <span class="token builtin">MapView</span><span class="token punctuation">:</span> <span class="token builtin">UIViewRepresentable</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function">makeUIView</span><span class="token punctuation">(</span>context<span class="token punctuation">:</span> <span class="token builtin">Context</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">MKMapView</span> <span class="token punctuation">{</span>
        <span class="token function">MKMapView</span><span class="token punctuation">(</span>frame<span class="token punctuation">:</span> <span class="token punctuation">.</span>zero<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">updateUIView</span><span class="token punctuation">(</span><span class="token number">_</span> view<span class="token punctuation">:</span> <span class="token builtin">MKMapView</span><span class="token punctuation">,</span> context<span class="token punctuation">:</span> <span class="token builtin">Context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> coordinate <span class="token operator">=</span> <span class="token function">CLLocationCoordinate2D</span><span class="token punctuation">(</span>
            latitude<span class="token punctuation">:</span> <span class="token number">34.011286</span><span class="token punctuation">,</span> longitude<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">116.166868</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> span <span class="token operator">=</span> <span class="token function">MKCoordinateSpan</span><span class="token punctuation">(</span>latitudeDelta<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">,</span> longitudeDelta<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> region <span class="token operator">=</span> <span class="token function">MKCoordinateRegion</span><span class="token punctuation">(</span>center<span class="token punctuation">:</span> coordinate<span class="token punctuation">,</span> span<span class="token punctuation">:</span> span<span class="token punctuation">)</span>
        view<span class="token punctuation">.</span><span class="token function">setRegion</span><span class="token punctuation">(</span>region<span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">MapView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当预览处于 <code>static mode</code> 时仅显示 <code>SwiftUI</code> view 。因为 <code>MKMapView</code> 是一个 <code>UIView</code> 的子类，所以需要切换到实时模式才能看到地图。</p> <p><strong>步骤五</strong></p> <p>单击 <code>Live Preview</code> 可将预览切换为实时模式，有时也会用到 <code>Try Again</code> 或 <code>Resume</code> 按钮。</p> <p>片刻之后，你会看到 <code>Joshua Tree National Park</code> 的地图，这是 <code>Turtle Rock</code> 的故乡。</p> <p><img src="/assets/img/SwiftUI-37.89462415.png" alt></p> <h2 id="_6-编写详情-view"><a href="#_6-编写详情-view" aria-hidden="true" class="header-anchor">#</a> 6.编写详情 View</h2> <p>现在我们完成了所需的所有组件：名称、地点、圆形图片和地图。</p> <p>继续使用目前的工具，将这些组件组合起来变成符合最终设计的详情 view。</p> <p><img src="/assets/img/SwiftUI-38.12922589.png" alt></p> <p><strong>步骤一</strong></p> <p>在项目导航中，选中 <code>ContentView.swift</code> 文件。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token builtin">HStack</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>步骤二</strong></p> <p>把之前的的 <code>VStack</code> 嵌入到另一个新 的 <code>VStack</code> 中。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            <span class="token builtin">HStack</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-39.bf115047.png" alt></p> <p><strong>步骤三</strong></p> <p>将自定义的 <code>MapView</code> 添加到 <code>stack</code> 顶部，使用 <code>frame(width:height:)</code> 方法来设置 <code>MapView</code> 的大小。</p> <p>如果仅指定了 <code>height</code> 参数，view 会自动调整其内容的宽度。此节中， <code>MapView</code> 会展开并填充所有可用空间。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token builtin">VStack</span> <span class="token punctuation">{</span>
            <span class="token function">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">)</span>

            <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                <span class="token function">HStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                    <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-40.dbd14f3e.png" alt></p> <p><strong>步骤四</strong></p> <p>单击 <code>Live Preview</code> 按钮，在组合 view 中查看渲染的地图。</p> <p>在此过程中，我们可以继续编辑 view。</p> <p><strong>步骤五</strong></p> <p>将 <code>CircleImage</code> 添加到 <code>stack</code> 中。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token builtin">VStack</span> <span class="token punctuation">{</span>
            <span class="token function">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">)</span>

            <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                <span class="token function">HStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                    <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-41.0bc8bc83.png" alt></p> <p><strong>步骤六</strong></p> <p>为了将 <code>image view</code> 布局在 <code>map view</code> 的顶部，我们需要给图片设置 <code>-130 points</code> 的偏移量，并从底部填充 <code>-130 points</code> 。</p> <p>图片向上移动后，就为文本腾出了空间。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token builtin">VStack</span> <span class="token punctuation">{</span>
            <span class="token function">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">)</span>

            <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>y<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">130</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>bottom<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">130</span><span class="token punctuation">)</span>

            <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                <span class="token function">HStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                    <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-42.6cb9970f.png" alt></p> <p><strong>步骤七</strong></p> <p>在外部 <code>VStack</code> 的底部添加一个 <code>spacer</code> ，将内容推到屏幕顶端。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token builtin">VStack</span> <span class="token punctuation">{</span>
            <span class="token function">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">)</span>

            <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>y<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">130</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>bottom<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">130</span><span class="token punctuation">)</span>

            <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                <span class="token function">HStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                    <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-43.f0fc2a2e.png" alt></p> <p><strong>步骤八</strong></p> <p>最后，为了将地图内容扩展到屏幕的上边缘，需要将 <code>edgesIgnoringSafeArea(.top)</code> 添加到 map view 中。</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView</span><span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token builtin">VStack</span> <span class="token punctuation">{</span>
            <span class="token function">MapView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">edgesIgnoringSafeArea</span><span class="token punctuation">(</span><span class="token punctuation">.</span>top<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">frame</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">)</span>

            <span class="token function">CircleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>y<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">130</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>bottom<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">130</span><span class="token punctuation">)</span>

            <span class="token function">VStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>leading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Turtle Rock&quot;</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                <span class="token function">HStack</span><span class="token punctuation">(</span>alignment<span class="token punctuation">:</span> <span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Joshua Tree National Park&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                    <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;California&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>subheadline<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token function">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token builtin">ContentView_Preview</span><span class="token punctuation">:</span> <span class="token builtin">PreviewProvider</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> some <span class="token builtin">View</span> <span class="token punctuation">{</span>
        <span class="token function">ContentView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/SwiftUI-44.3979db60.png" alt></p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/source/swiftui/" class="prev router-link-active">
          SwiftUI 官方教程一: SwiftUI
        </a></span> <span class="next"><a href="/source/swiftui/SwiftUI-tutorial-03.html">
          SwiftUI 官方教程三: 构建列表与导航
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.b460ff26.js" defer></script><script src="/assets/js/2.be69c04c.js" defer></script>
  </body>
</html>
